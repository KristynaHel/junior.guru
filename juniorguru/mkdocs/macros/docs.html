{% from 'shared.html' import img %}


{% macro markdown() %}
    {{ caller()|md }}
{% endmacro %}


{% macro lead() %}
  <div class="lead">
    {{ caller()|md }}
  </div>
{% endmacro %}


{% macro blockquote(quote, caption=None) %}
  <div class="blockquote-container">
    <figure class="blockquote-content">
      <blockquote class="blockquote">
        <p>{{ quote }}</p>
      </blockquote>
      <figcaption class="blockquote-footer">
        {% if caption %}
          {{ caption }}
        {% else %}
          {{ caller()|md|remove_p }}
        {% endif %}
      </figcaption>
    </figure>
  </div>
{% endmacro %}


{% macro blockquote_avatar(quote, avatar_filename, avatar_alt, caption=None, lazy=True) %}
  <div class="blockquote-container avatar">
    <figure class="blockquote-content">
      {{ img('static/images/avatars-quotes/' + avatar_filename, avatar_alt, 50, 50, class='blockquote-avatar', lazy=lazy) }}
      <blockquote class="blockquote">
        <p>{{ quote }}</p>
      </blockquote>
      <figcaption class="blockquote-footer">
        {% if caption %}
          {{ caption }}
        {% else %}
          {{ caller()|md|remove_p }}
        {% endif %}
      </figcaption>
    </figure>
  </div>
{% endmacro %}


{% macro blockquote_toxic(quote, caption, url=None) %}
  <div class="blockquote-container toxic icon">
    <figure class="blockquote-content">
      <i class="bi bi-x-circle blockquote-icon"></i>
      <blockquote class="blockquote"{% if url %} cite="{{ url }}"{% endif %}>
        <p>{{ quote }}</p>
      </blockquote>
      <figcaption class="blockquote-footer">
        {{ caption }}
      </figcaption>
    </figure>
  </div>
{% endmacro %}


{% macro see_also(page) %}
  <div class="see-also standout-top">
    <h2>Související</h2>
    <ul>
      {% for nav_item in page.parent.children %}
        {% if nav_item != page %}
          <li><a href="{{ nav_item.url|url }}"{% if nav_item.is_link %} target="_blank" rel="noopener"{% endif %}>
            {{- nav_item.title -}}
          </a></li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% endmacro %}


{% macro event_circle(event) %}
  <li class="event-circles-item">
    {% if event.is_public %}
      <a href="{{ event.recording_url }}" target="_blank" rel="noopener" class="event-circles-link">
    {% endif %}

    {% if event.avatar_path %}
      {{ img('static/images/' + event.avatar_path, event.bio_name, 100, 100) }}
    {% else %}
      {% for speaking in event.list_speaking %}
        {{ img('static/images/' + speaking.avatar_path, event.bio_name, 100, 100) }}
      {% endfor %}
    {% endif %}

    <h3>{{ event.bio_name }}</h3>

    {% if event.is_public %}</a>{% endif %}

    <p>
      {{ event.title }}
    </p>
  </li>
{% endmacro %}


{% macro link_card(title, screenshot_filename, url, caption=None, icon=None, icon_alt=None) %}
<div class="link-card">
  {{ img('static/images/screenshots/' + screenshot_filename, title, 640, 360, class='link-card-image') }}
  {% if icon %}
    <div class="link-card-icon"{% if icon_alt %} title="{{ icon_alt }}"{% endif %}>
      <i class="bi bi-{{ icon }}" role="img"{% if icon_alt %} aria-label="{{ icon_alt }}"{% endif %}></i>
    </div>
  {% endif %}
  <div class="link-card-body">
    <h4 class="link-card-title">
      <a href="{{ url }}" class="stretched-link">{{ title }}</a>
    </h4>
    <p class="link-card-text">
      {% if caption %}
        {{ caption }}
      {% else %}
        {{ caller()|md|remove_p }}
      {% endif %}
    </p>
  </div>
</div>
{% endmacro %}
