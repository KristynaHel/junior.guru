{% macro img(filename, alt, width, height, class=None, lazy=True) %}
  <img
    {% if filename.endswith('.svg') %}
      src="{{ filename|url }}"
    {% else %}
      src="https://res.cloudinary.com/juniorguru/image/fetch/w_{{ width }},dpr_auto,q_auto,f_auto/https://junior.guru/{{ filename }}"
      srcset="{{- '' -}}
        https://res.cloudinary.com/juniorguru/image/fetch/w_{{ width }},dpr_1,q_auto,f_auto/https://junior.guru/{{ filename }}, {{- '' -}}
        https://res.cloudinary.com/juniorguru/image/fetch/w_{{ width }},dpr_1.5,q_auto,f_auto/https://junior.guru/{{ filename }} 1.5x, {{- '' -}}
        https://res.cloudinary.com/juniorguru/image/fetch/w_{{ width }},dpr_2,q_auto,f_auto/https://junior.guru/{{ filename }} 2x, {{- '' -}}
        https://res.cloudinary.com/juniorguru/image/fetch/w_{{ width }},dpr_3,q_auto,f_auto/https://junior.guru/{{ filename }} 3x {{- '' -}}
      "
      onerror="this.onerror = null; this.src = this.srcset = '{{ filename|url }}';"
    {% endif %}
    alt="{{ alt }}" width="{{ width }}" height="{{ height }}"
    {% if lazy %} loading="lazy"{% endif %}
    {% if class %} class="{{ class }}"{% endif %}
    {{- '' -}}
  >
{% endmacro %}


{% macro logo(name, filename, url=None, lazy=False) %}
  <li class="logos-item" title="{{ name }}">
    {% if url %}
    <a class="logos-link" href="{{ url }}" target="_blank" rel="noopener"
      data-metrics-utm data-metrics-utm-medium="logo" data-metrics-utm-campaign="partnership">
    {% endif %}

    {{ img('static/images/logos/' + filename, name, 130, 60, class='logos-image', lazy=lazy) }}

    {% if url %}
    </a>
    {% endif %}
  </li>
{% endmacro %}
